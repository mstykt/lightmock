# ğŸš€ LightMock â€“ Lightweight Mock Server

LightMock is a fast, lightweight mock server ideal for API development, test automation, or simulating dependent services. Define your endpoints with JSON or YAML configurations and serve **static** or **random** responses instantly.

---

## âœ¨ Features

- âš¡ **Fast Startup** â€“ Launch the server with a single command, no extra dependencies required.
- ğŸ“„ **JSON & YAML Support** â€“ Flexible configuration formats.
- ğŸŒ **HTTP Methods** â€“ GET, POST, PUT, DELETE, and more.
- ğŸ² **Static & Random Responses**
    - ğŸŸ¢ Static Response: A single fixed response returned for every request.
    - ğŸ”€ Random Response: Multiple responses can be defined; one is selected randomly per request.
- ğŸ· **Path Parameters & Type Checking** â€“ e.g., `{id:int}` or `{name:string}`
- ğŸ“ **Request Body Validation** â€“ Optional `strictBody` enforcement.
- ğŸ’» **CLI Support** â€“ `up`, `list`, `down` commands for server management.
- ğŸ“¦ **Standalone JAR** â€“ Java runtime is sufficient; no extra setup.
- ğŸ§ª **Test-Friendly** â€“ Suitable for CI/CD pipelines.

---

## âš™ï¸ Installation

```bash
git clone https://github.com/yourusername/lightmock.git
cd lightmock
mvn clean package

```
---
Generated JAR:

```
target/lightmock-1.0-SNAPSHOT-jar-with-dependencies.jar
```

---

## ğŸ Quick Start

#### ğŸ“„ YAML Example

```
# Static Response
- request:
    method: GET
    path: /status
  response:
    - status: 200
      body:
        status: "ok"

# Random Response
- request:
    method: GET
    path: /users/{id:int}
  response:
    - status: 200
      body:
        id: "{{id}}"
        name: "Alice"
    - status: 200
      body:
        id: "{{id}}"
        name: "Bob"

# POST with strictBody
- request:
    method: POST
    path: /login
    body:
      username: "admin"
      password: "1234"
  response:
    - status: 200
      body:
        token: "abcdef123456"
    - status: 401
      body:
        error: "Unauthorized"

# DELETE with no body response
- request:
    method: DELETE
    path: /users/{id:int}
  response:
    - status: 204
      body: ""
```

#### ğŸ“„ JSON Example
```
[
  {
    "request": { "method": "GET", "path": "/status" },
    "response": [
      { "status": 200, "body": { "status": "ok" } }
    ]
  },
  {
    "request": { "method": "GET", "path": "/users/{id:int}" },
    "response": [
      { "status": 200, "body": { "id": "{{id}}", "name": "Alice" } },
      { "status": 200, "body": { "id": "{{id}}", "name": "Bob" } }
    ]
  },
  {
    "request": { "method": "POST", "path": "/login", "body": { "username": "admin", "password": "1234" } },
    "response": [
      { "status": 200, "body": { "token": "abcdef123456" } },
      { "status": 401, "body": { "error": "Unauthorized" } }
    ]
  },
  {
    "request": { "method": "DELETE", "path": "/users/{id:int}" },
    "response": [
      { "status": 204, "body": "" }
    ]
  }
]
```
---
## ğŸ’» CLI Usage

```
# Start server with YAML
java -jar target/lightmock-1.0-SNAPSHOT-jar-with-dependencies.jar up mocks.yaml --port 8087

# Start server with JSON
java -jar target/lightmock-1.0-SNAPSHOT-jar-with-dependencies.jar up mocks.json -p 8087

# List endpoints
java -jar target/lightmock-1.0-SNAPSHOT-jar-with-dependencies.jar list

# Stop server
# Use Ctrl+C
```

---

## ğŸ§ª cURL Examples

```
# Static response
curl http://localhost:8087/status
# -> {"status":"ok"}

# Random response
curl http://localhost:8087/users/42
# -> {"id":"42","name":"Alice"} or {"id":"42","name":"Bob"}

# POST login
curl -X POST http://localhost:8087/login \
    -H "Content-Type: application/json" \
    -d '{"username":"admin","password":"1234"}'

# DELETE user
curl -X DELETE http://localhost:8087/users/99
# -> HTTP 204 No Content
```
---

## âš™ï¸ Advanced Features
- **ğŸ¯ Static vs Random Responses**
  - ğŸŸ¢ Static: Returns a fixed response.
  - ğŸ”€ Random: Returns one of multiple defined responses randomly.
- **ğŸ· Path Parameter Types** â€“ e.g., {id:int}, {name:string}
- **ğŸ“ Request Body Validation** â€“ strictBody: true/false
- **ğŸ“¦ Content-Type Headers** â€“ Customize response headers
- **ğŸ§© Nested Endpoints** â€“ Support for complex endpoint structures

---

## ğŸ“ Test Script

##### test_lightmock.sh:
```
#!/bin/bash
echo "Testing GET /status"
curl -s http://localhost:8087/status
echo

echo "Testing GET /users/1"
curl -s http://localhost:8087/users/1
echo

echo "Testing POST /login wrong password"
curl -s -X POST http://localhost:8087/login \
    -H "Content-Type: application/json" \
    -d '{"username":"admin","password":"wrong"}'
echo

echo "Testing DELETE /users/99"
curl -s -X DELETE http://localhost:8087/users/99
echo
```

---

### ğŸ¤ Contributing
1.	Fork the repository
2.	Create a new branch
3.	Commit and push your changes
4.	Open a Pull Request

---

#### ğŸ“„ License

MIT License Â© 2025